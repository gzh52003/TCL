(function(e){function t(t){for(var r,o,n=t[0],i=t[1],u=t[2],m=0,p=[];m<n.length;m++)o=n[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);c&&c(t);while(p.length)p.shift()();return l.push.apply(l,u||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],r=!0,n=1;n<a.length;n++){var i=a[n];0!==s[i]&&(r=!1)}r&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},s={app:0},l=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],i=n.push.bind(n);n.push=t,n=n.slice();for(var u=0;u<n.length;u++)t(n[u]);var c=i;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0ade":function(e,t){},"0de7":function(e,t,a){},"154c":function(e,t,a){},"308d":function(e,t,a){},3818:function(e,t,a){"use strict";var r=a("154c"),s=a.n(r);s.a},"4f79":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var r=a("2b0e"),s=a("5c96"),l=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],i={},u=i,c=a("2877"),m=Object(c["a"])(u,o,n,!1,null,null,null),p=m.exports,d=a("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticClass:"header"},[a("el-row",[a("el-col",{staticClass:"logo",attrs:{span:12}},[a("i",{staticClass:"el-icon-camera"}),e._v("TCL后台管理系统 ")]),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("span",{attrs:{id:"span1"}},[e._v("欢迎登录："+e._s(e.username))]),a("el-button",{staticStyle:{width:"50px text-align:center"},attrs:{type:"danger"},nativeOn:{click:function(t){return e.goout()}}},[e._v("退出")])],1)],1)],1),a("el-container",{staticClass:"content"},[a("el-aside",{attrs:{width:"200px"}},[a("el-menu",{staticStyle:{height:"100%"},attrs:{router:"","default-active":e.$route.path,mode:"vertical","background-color":"#545c64","text-color":"#fff","active-text-color":"#ff0","default-openeds":e.openMenu}},[e._l(e.menu,(function(t){return[t.submenu?a("el-submenu",{key:t.path,attrs:{index:t.path},scopedSlots:e._u([{key:"title",fn:function(){return[a("i",{class:t.icon,staticStyle:{color:"#fff"}}),e._v(" "+e._s(t.text)+" ")]},proxy:!0}],null,!0)},e._l(t.submenu,(function(r){return a("el-menu-item",{key:r.path,attrs:{index:t.path+r.path}},[e._v(e._s(r.text))])})),1):a("el-menu-item",{key:t.path,attrs:{index:t.path}},[a("i",{class:t.icon,staticStyle:{color:"#fff"}}),e._v(" "+e._s(t.text)+" ")])]}))],2)],1),a("el-main",[a("div",{staticStyle:{padding:"15px 0"}},[a("router-view")],1)])],1)],1)},g=[],f={name:"App",data(){return{username:"",openMenu:[],menu:[{text:"首页",path:"/home",icon:"el-icon-s-home"},{text:"用户管理",path:"/user",icon:"el-icon-user-solid",submenu:[{text:"添加用户",path:"/add"},{text:"用户列表",path:"/userList"}]},{text:"商品管理",path:"/list",icon:"el-icon-s-grid"},{text:"订单管理",path:"/order",icon:"el-icon-shopping-cart-2"}]}},async created(){let e=localStorage.getItem("currentUser");e=JSON.parse(e),this.username=e.username},methods:{goout(){localStorage.removeItem("currentUser"),this.$router.push("/login")}}},v=f,b=(a("8519"),Object(c["a"])(v,h,g,!1,null,null,null)),y=b.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"myEchart",staticStyle:{width:"600px",height:"400px"},attrs:{id:"main"}}),a("div",{ref:"myEchart2",staticStyle:{width:"600px",height:"400px",position:"absolute",top:"100px",right:"20px"},attrs:{id:"main2"}})])},x=[],$=(a("3139"),{methods:{get(){let e=this.$refs.myEchart2;var t=this.$echarts.init(e),a={title:{text:"商品类别销售占比",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}次 ({d}%)"},legend:{orient:"vertical",left:"50",data:["空调","电视","冰箱","洗衣机","健康电器","智能硬件"]},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!0},restore:{show:!0},saveAsImage:{show:!0}}},series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:335,name:"空调"},{value:310,name:"电视"},{value:234,name:"冰箱"},{value:135,name:"洗衣机"},{value:1548,name:"健康电器"},{value:1548,name:"智能硬件"}]}]};t.setOption(a)},getdata(){let e=this.$refs.myEchart;var t=this.$echarts.init(e);function a(){return Math.round(60*Math.random())}var r=[{name:"北京",value:"100"},{name:"天津",value:a()},{name:"上海",value:a()},{name:"重庆",value:a()},{name:"河北",value:a()},{name:"河南",value:a()},{name:"云南",value:a()},{name:"辽宁",value:a()},{name:"黑龙江",value:a()},{name:"湖南",value:a()},{name:"安徽",value:a()},{name:"山东",value:a()},{name:"新疆",value:a()},{name:"江苏",value:a()},{name:"浙江",value:a()},{name:"江西",value:a()},{name:"湖北",value:a()},{name:"广西",value:a()},{name:"甘肃",value:a()},{name:"山西",value:a()},{name:"内蒙古",value:a()},{name:"陕西",value:a()},{name:"吉林",value:a()},{name:"福建",value:a()},{name:"贵州",value:a()},{name:"广东",value:a()},{name:"青海",value:a()},{name:"西藏",value:a()},{name:"四川",value:a()},{name:"宁夏",value:a()},{name:"海南",value:a()},{name:"台湾",value:a()},{name:"香港",value:a()},{name:"澳门",value:a()}],s={backgroundColor:"#FFFFFF",title:{text:"各地区消费人数",subtext:"",x:"center"},visualMap:{show:!0,x:"left",y:"center",splitList:[{start:50,end:60},{start:40,end:50},{start:30,end:40},{start:20,end:30},{start:10,end:20},{start:0,end:10}],color:["#5475f5","#9feaa5","#85daef","#74e2ca","#e6ac53","#9fb5ea"]},series:[{name:"数据",type:"map",mapType:"china",roam:!0,label:{normal:{show:!0},emphasis:{show:!1}},data:r}]};t.setOption(s)}},mounted(){this.getdata(),this.get()}}),F=$,k=Object(c["a"])(F,w,x,!1,null,null,null),_=k.exports,C=a("e36e"),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"username"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",disabled:""},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-select",{model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[a("el-option",{attrs:{label:"男",value:"男"}}),a("el-option",{attrs:{label:"女",value:"女"}}),a("el-option",{attrs:{label:"保密",value:"保密"}})],1)],1),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",e._n(t))},expression:"ruleForm.age"}})],1),a("img",{staticClass:"imgbox",attrs:{src:e.avatarUrl,alt:"",prop:"ruleForm.avatarUrl"}}),a("p",[a("input",{attrs:{type:"file"},on:{change:e.change}})]),a("el-form-item",[a("el-button",{staticClass:"btnb",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)],1)},O=[],z={data(){var e=(e,t,a)=>{if(!t)return a(new Error("年龄不能为空"));setTimeout(()=>{Number.isInteger(t)?t<18?a(new Error("必须年满18岁")):a():a(new Error("请输入数字值"))},1e3)};return{avatarUrl:"",id:"",path:"/user",component:"",ruleForm:{username:"",gender:"",age:""},rules:{username:[{trigger:"blur"}],gender:[{trigger:"blur"}],age:[{validator:e,trigger:"blur"}]}}},methods:{async change(e){let t=this.id;const a=new FormData;a.append("avatar",e.target.files[0]),a.append("_id",t);let{data:r}=await this.$request.post("/upload/avatar",a,{"Content-Type":"multipart/form-data"});this.avatarUrl=r.data.avatarUrl},submitForm(e){let{page:t}=this.$route.params;console.log(t),this.$refs[e].validate(async e=>{if(!e)return this.$message({message:"修改失败"}),!1;{const{ruleForm:e}=this,{_id:a}=e;console.log(e);let{data:r}=await this.$request.put("/mongoUser/"+a,{...e});console.log(r),this.$message({message:"修改成功"}),this.$router.push({name:"UserList",params:{page:t}})}})}},async created(){let{id:e}=this.$route.params;const{data:t}=await this.$request.get("/mongoUser/"+e);console.log(t),this.id=e,this.avatarUrl=t.data.avatarUrl,Object.assign(this.ruleForm,t.data)}},E=z,q=(a("f2f1"),Object(c["a"])(E,S,O,!1,null,null,null)),I=q.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-select",{model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[a("el-option",{attrs:{label:"男",value:"男"}}),a("el-option",{attrs:{label:"女",value:"女"}}),a("el-option",{attrs:{label:"保密",value:"保密"}})],1)],1),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",e._n(t))},expression:"ruleForm.age"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交")])],1)],1)},j=[],T={data(){var e=(e,t,a)=>{if(!t)return a(new Error("年龄不能为空"));setTimeout(()=>{Number.isInteger(t)?t<18?a(new Error("必须年满18岁")):a():a(new Error("请输入数字值"))},1e3)};return{path:"/user",component:"",ruleForm:{username:"",gender:"",age:"",password:""},rules:{username:[{trigger:"blur"}],gender:[{trigger:"blur"}],age:[{validator:e,trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate(async e=>{if(!e)return console.log("error submit!!"),!1;{const{ruleForm:e}=this;let{data:t}=await this.$request.get("/mongoUser/check",{params:{...e}});if(console.log(t),console.log(t.code),0===t.code)return void this.$message({message:"用户名已存在"});if(1===t.code){let{data:t}=await this.$request.post("/mongoUser/reg",{...e});console.log(t),this.$message({message:"新增成功"}),this.$router.push({name:"UserList"})}}})}}},B=T,L=(a("3818"),Object(c["a"])(B,U,j,!1,null,null,null)),G=L.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{display:"inline-block"},attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"查询用户"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.onSubmit(t):null}},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),a("el-table",{staticClass:"tablelist",staticStyle:{width:"100%"},attrs:{data:e.userlist}},[a("el-table-column",{attrs:{label:"Name",prop:"username"}}),a("el-table-column",{attrs:{label:"Gender",prop:"gender"}}),a("el-table-column",{attrs:{label:"Age",prop:"age"}}),a("el-table-column",{attrs:{label:"photo",prop:"photo"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.avatarUrl,alt:""}})]}}])}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.pages,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},N=[],P={data(){return{userlist:[],page:1,pagesize:10,total:0,pages:0,formInline:{user:"",region:""}}},methods:{async onSubmit(){let{user:e}=this.formInline,{data:t}=await this.$request.get("/mongoUser/vague",{params:{name:e}});this.total=t.data.length,this.userlist=t.data},change(){this.$router.push({name:"add"})},handleEdit(e,t){let a=t._id,r=this.page;this.$router.push({name:"userEdit",params:{id:a,page:r}})},async handleDelete(e,t){if(confirm("是否确定删除")){let e=t._id,{data:a}=await this.$request.delete("/mongoUser/"+e);1==a.code?(this.$message({message:a.msg}),this.fetchall()):2==a.code&&this.$message({message:a.msg})}},handleSizeChange(e){this.pagesize=e,this.page=1,this.fetchall()},handleCurrentChange(e){this.page=e,this.fetchall()},async fetchall(){let e=this.page,t=this.pagesize;const{data:a}=await this.$request.get("/mongoUser/select",{params:{page:e,size:t}});this.userlist=a.data,this.total=a.total}},created(){let{page:e}=this.$route.params;this.handleCurrentChange(e),this.pages=e}},A=P,J=(a("a10b"),Object(c["a"])(A,M,N,!1,null,null,null)),R=J.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"relative",top:"-33px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("h1",[e._v("商品管理")])]),a("el-col",{attrs:{span:12}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{padding:"11px 0",height:"40px"},attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"查询商品"}},[a("el-input",{attrs:{placeholder:"请输入商品姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.goodslist,height:"400"}},[a("el-table-column",{attrs:{prop:"pic",label:"#",width:"180"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.pic,alt:"",width:"80"}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"price",label:"价格"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteGoods(t.row._id,t.row.name)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.gotoAlterGoods(t.row._id)}}},[e._v("编辑")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":e.pages,"page-sizes":[5,10,20,40],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},H=[],V={data(){return{goodslist:[],page:1,size:10,total:0,pages:0,formInline:{name:""}}},methods:{async onSubmit(){console.log(1);let{name:e}=this.formInline,{data:t}=await this.$request.get("/good/vague",{params:{name:e}});this.total=t.data.length,this.goodslist=t.data},gotoAlterGoods(e){this.$router.push("/list/alterGoods/"+e)},deleteGoods(e,t){const a=this.$createElement;this.$msgbox({title:"警告！",message:a("p",null,[a("span",null,"确定要删除 "),a("i",{style:"color: teal"},t)]),type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:(e,t,a)=>{"confirm"===e?(t.confirmButtonLoading=!0,t.confirmButtonText="执行中...",setTimeout(()=>{a(),setTimeout(()=>{t.confirmButtonLoading=!1},300)},2e3)):a()}}).then(async()=>{console.log(e);const{data:a}=await this.$request.delete("/good/"+e);1===a.code?(this.goodslist=this.goodslist.filter(t=>t._id!==e),this.$message({type:"info",message:"删除成功"+t+"的数据"})):this.$message({type:"info",message:"删除失败"})})},handleSizeChange(e){this.size=e,this.page=1,this.fetchall()},handleCurrentChange(e){this.page=e,this.fetchall()},async fetchall(){let e=this.page,t=this.size;const{data:a}=await this.$request.get("/good",{params:{page:e,size:t}});this.goodslist=a.data}},async created(){let e=await this.$request.get("/good/many"),{data:t}=await this.$request.get("/good",{params:{page:this.page,size:this.size}});this.goodslist=t.data,this.total=e.data.data.length,console.log(this.goodslist)}},K=V,Q=Object(c["a"])(K,D,H,!1,null,null,null),W=Q.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"","label-width":"100px",rules:e.rules}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"price"}},[a("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",e._n(t))},expression:"ruleForm.price"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("修改")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getBack()}}},[e._v("返回")])],1)],1),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:12}},[a("img",{attrs:{src:e.ruleForm.pic,alt:"",width:"180"}}),a("input",{staticClass:"upload_input",attrs:{type:"file"},on:{change:e.upload}})])],1)],1)},Y=[],Z={data(){var e=(e,t,a)=>{if(!t)return a(new Error("价格不能为空"));setTimeout(()=>{Number.isInteger(t)?t<0?a(new Error("必须为正数")):a():a(new Error("请输入数字值"))},1e3)};return{goodsId:"",ruleForm:{name:"",price:"",pic:""},rules:{price:[{validator:e,trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate(async e=>{if(!e)return console.log("error submit!!"),!1;{const{goodsId:e,ruleForm:t}=this,{data:a}=await this.$request.put("/good/"+e,{...t});console.log(a),1===a.code?(this.$message({type:"success",message:"修改成功"}),this.getBack()):this.$message({type:"fail",message:"修改失败"})}})},getBack(){this.$router.back()},async upload(e){console.log(e);const t=new FormData;t.set("_id",this.ruleForm._id),t.set("goods",e.target.files[0]);const a=await this.$request.put("/upload/goods",t,{"Content-Type":"multipart/form-data"});console.log(a),this.ruleForm.pic=a.data.data.goodsUrl}},async created(){const{id:e}=this.$route.params;this.goodsId=e;let{data:t}=await this.$request.get("/good/"+e);Object.assign(this.ruleForm,t.data)}},ee=Z,te=(a("6972"),Object(c["a"])(ee,X,Y,!1,null,null,null)),ae=te.exports,re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"relative",top:"-33px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("h1",[e._v("商品管理")])]),a("el-col",{attrs:{span:12}},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{padding:"11px 0",height:"40px"},attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"查询商品"}},[a("el-input",{attrs:{placeholder:"请输入商品姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)}},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.goodslist,height:"400"}},[a("el-table-column",{attrs:{prop:"img",label:"#",width:"180"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.img,alt:"",width:"80"}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"商品姓名",width:"180"}}),a("el-table-column",{attrs:{prop:"price",label:"价格"}}),a("el-table-column",{attrs:{prop:"qty",label:"下单数量"}}),a("el-table-column",{attrs:{prop:"adress",label:"收货地址"}}),a("el-table-column",{attrs:{prop:"username",label:"收货人"}}),a("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteGoods(t.row._id,t.row.name)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.gotoAlterGoods(t.row._id)}}},[e._v("编辑")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":e.pages,"page-sizes":[5,10,20,40],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},se=[],le={data(){return{goodslist:[],page:1,size:10,total:0,pages:0,formInline:{name:""}}},methods:{async onSubmit(){console.log(1);let{name:e}=this.formInline,{data:t}=await this.$request.get("/good/vague",{params:{name:e}});this.total=t.data.length,this.goodslist=t.data},gotoAlterGoods(e){this.$router.push("/list/alterGoods/"+e)},deleteGoods(e,t){const a=this.$createElement;this.$msgbox({title:"警告！",message:a("p",null,[a("span",null,"确定要删除 "),a("i",{style:"color: teal"},t)]),type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:(e,t,a)=>{"confirm"===e?(t.confirmButtonLoading=!0,t.confirmButtonText="执行中...",setTimeout(()=>{a(),setTimeout(()=>{t.confirmButtonLoading=!1},300)},2e3)):a()}}).then(async()=>{console.log(e);const{data:a}=await this.$request.delete("/good/"+e);1===a.code?(this.goodslist=this.goodslist.filter(t=>t._id!==e),this.$message({type:"info",message:"删除成功"+t+"的数据"})):this.$message({type:"info",message:"删除失败"})})},handleSizeChange(e){this.size=e,this.page=1,this.fetchall()},handleCurrentChange(e){this.page=e,this.fetchall()},async fetchall(){let e=this.page,t=this.size;const{data:a}=await this.$request.get("/good",{params:{page:e,size:t}});this.goodslist=a.data}},async created(){let e=[],t=await this.$request.get("/good/shoppingcar");t=t.data.data,t=t.map(e=>e.list),t=t.map(t=>{t.map(t=>{e.push(t)})}),console.log(e),console.log(t),this.goodslist=e,this.total=e.length,console.log(this.goodslist)}},oe=le,ne=Object(c["a"])(oe,re,se,!1,null,null,null),ie=ne.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",[e._v("你访问的页面不存在")])},ce=[],me={},pe=me,de=Object(c["a"])(pe,ue,ce,!1,null,null,null),he=de.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"login-form"},[a("h2",{staticClass:"login-title"},[e._v("TCL后台管理系统-注册")]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账号",prop:"username"}},[a("el-input",{on:{change:function(t){return e.change()}},model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.submitForm("ruleForm"):null}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("注册")]),a("el-button",{on:{click:e.gotoReg}},[e._v("登录")])],1)],1)],1)])},fe=[],ve={data(){return{ruleForm:{username:"",password:"",flag:""},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},methods:{async change(){let{username:e}=this.ruleForm,{data:t}=await this.$request.get("/mongoUser/check",{params:{username:e}});1===t.code?this.flag=!0:0===t.code&&(this.flag=!1,this.$message({message:t.msg})),console.log(this.flag)},submitForm(e){this.flag?this.$refs[e].validate(async e=>{if(!e)return!1;{let e=this.ruleForm.username,t=this.ruleForm.password,{data:a}=await this.$request.post("/mongoUser/reg",{username:e,password:t});if(1==a.code)this.$message({message:a.msg}),this.$router.push("/login");else if(2==a.code)return void this.$message({message:"账号或密码错误"})}}):this.$message({message:"用户名已存在，请重新注册"})},gotoReg(){this.$router.push("/login")}}},be=ve,ye=(a("62f8"),Object(c["a"])(be,ge,fe,!1,null,"3c0f5350",null)),we=ye.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"login-form"},[a("h2",{staticClass:"login-title"},[e._v("TCL后台管理系统-登录")]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账号",prop:"username"}},[a("el-input",{model:{value:e.ruleForm.username,callback:function(t){e.$set(e.ruleForm,"username",t)},expression:"ruleForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.submitForm("ruleForm"):null}},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),a("el-form-item",{attrs:{label:"验证码",prop:"vcode"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入验证码"},model:{value:e.ruleForm.vcode,callback:function(t){e.$set(e.ruleForm,"vcode",t)},expression:"ruleForm.vcode"}}),a("span",{ref:"vcode",staticClass:"vcode",on:{click:function(t){return e.change()}}})],1),a("el-form-item",[a("el-checkbox",{nativeOn:{click:function(t){return e.keep(t)}},model:{value:e.ruleForm.checked,callback:function(t){e.$set(e.ruleForm,"checked",t)},expression:"ruleForm.checked"}},[e._v("保留7天免登陆")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")]),a("el-button",{on:{click:e.gotoReg}},[e._v("注册")])],1)],1)],1)])},$e=[],Fe={data(){return{ruleForm:{username:"",password:"",checked:!0,vcode:""},rules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},methods:{async change(){let{data:e}=await this.$request.get("vcode");this.$refs.vcode.innerHTML=e.data},submitForm(e){this.$refs[e].validate(async e=>{if(!e)return!1;{let e=this.ruleForm.username,t=this.ruleForm.password,a=this.ruleForm.checked,r=this.ruleForm.vcode,{data:s}=await this.$request.post("/mongoUser/login",{username:e,password:t,checked:a,vcode:r});if(3===s.code)return this.$message({message:"验证码错误"}),void this.change();if(1==s.code)localStorage.setItem("currentUser",JSON.stringify(s.data)),this.$message({message:s.msg}),this.$router.push("/home");else if(2==s.code)return void this.$message({message:"账号或密码错误"})}})},gotoReg(){this.$router.push("/reg")},keep(e){"INPUT"!=e.target.tagName&&(console.log(this.ruleForm.checked),this.ruleForm.checked||this.$message({message:"请不要在公共场合使用该功能",type:"warning"}))}},async created(){let e=localStorage.getItem("currentUser");e=JSON.parse(e),e&&this.$router.push("/home"),this.change()}},ke=Fe,_e=(a("e502"),Object(c["a"])(ke,xe,$e,!1,null,"1984b469",null)),Ce=_e.exports,Se=a("bc3a"),Oe=a.n(Se);Oe.a.defaults.withCredentials=!0;const ze="http://120.25.229.45:5000",Ee=Oe.a.create({baseURL:ze});var qe=Ee;r["default"].use(d["a"]);const Ie=new d["a"]({routes:[{path:"/reg",component:we},{path:"/login",component:Ce},{path:"/",component:y,meta:{requiresAuth:!0},children:[{path:"/home",component:_},{name:"user",path:"/user",component:C["default"],children:[{name:"userEdit",path:"/edit/:id",component:I},{name:"add",path:"add",component:G},{name:"UserList",path:"userList",component:R}]},{path:"/list",component:W},{path:"/list/alterGoods/:id",component:ae},{path:"/order",component:ie}]},{path:"/404",component:he},{path:"*",component:he}]});Ie.beforeEach((async function(e,t,a){if(e.matched.some(e=>e.meta.requiresAuth)){let t=localStorage.getItem("currentUser")||{};try{t=JSON.parse(t)}catch(r){t={}}t.authorization?qe.get("/jwtverify",{params:{authorization:t.authorization}}).then(({data:t})=>{2===t.code&&(localStorage.removeItem("currentUser"),a({path:"/login",query:{redirectTo:e.fullPath}})),a()}):a({path:"/login",query:{redirectTo:e.fullPath}})}else a()}));var Ue=Ie,je=(a("0fae"),a("313e")),Te=a.n(je);r["default"].use(l.a),r["default"].prototype.$request=qe,r["default"].prototype.$echarts=Te.a,new r["default"]({router:Ue,render:e=>e(p)}).$mount("#app")},"62f8":function(e,t,a){"use strict";var r=a("308d"),s=a.n(r);s.a},"63ac":function(e,t,a){},6972:function(e,t,a){"use strict";var r=a("4f79"),s=a.n(r);s.a},8519:function(e,t,a){"use strict";var r=a("8dfd"),s=a.n(r);s.a},"8dfd":function(e,t,a){},"8f36":function(e,t,a){},"91c8":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-view")],1)},s=[]},a10b:function(e,t,a){"use strict";var r=a("63ac"),s=a.n(r);s.a},b2bb:function(e,t,a){"use strict";var r=a("0ade"),s=a.n(r);t["default"]=s.a},e36e:function(e,t,a){"use strict";var r=a("91c8"),s=a("b2bb"),l=a("2877"),o=Object(l["a"])(s["default"],r["a"],r["b"],!1,null,null,null);t["default"]=o.exports},e502:function(e,t,a){"use strict";var r=a("0de7"),s=a.n(r);s.a},f2f1:function(e,t,a){"use strict";var r=a("8f36"),s=a.n(r);s.a}});
//# sourceMappingURL=app.c5e0bf5b.js.map